<!doctype html>
<html>
<head>
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="https://rawgit.com/intridea/sketch.js/gh-pages/lib/sketch.js"></script>    
<style>
    body{ background-color: black; }
    #wrapper{width: 800px; margin: 0 auto;}
    #bk,#myCanvas{position:absolute;}
</style>
<script>
$(function(){

    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");

    $('#myCanvas').sketch({ defaultColor: "red" });

    $('#download').click(function() {
          var img=document.getElementById('bk');
          ctx.globalCompositeOperation='destination-over';
          ctx.drawImage(bk, 0, 0);
          ctx.globalCompositeOperation='source-over';
          var html="";
          html+="<img src='"+c.toDataURL()+"' alt='from canvas'/>";
          var tab=window.open();
          tab.document.write(html);
    });

}); // end $(function(){});
</script>
</head>
<body>
    <h4>Drag to sketch on the map.</h4>
    <button id=download>Download</button>
    <div id='wrapper'>
        <img crossOrigin='anonymous' id=bk src='https://dl.dropboxusercontent.com/u/139992952/multple/googlemap1.png'>
        <canvas id="myCanvas" width=459 height=459></canvas>
    </div>
</body>
</html>
